<div class="d-flex justify-content-center">
    <div class="card" style="width: 18rem;">
        <div class="card-body">
            <input type="text" id="new-plant-title" class="card-title" placeholder="You must have a title"></input>
            <input type="text" id="new-plant-caption" class="card-text" placeholder="You must have a caption"></input>
        </div>
        <button id="upload_widget" class="cloudinary-button">
            <input src='/assets/add.png' class="card-img-top" type="image" id="new=plant-img">
            <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
            <script type="text/javascript">
                var myWidget = cloudinary.createUploadWidget({
                    cloudName: 'megs425',
                    uploadPreset: 'btvewbfq',
                    cropping: true,
                    croppingCoordinatesMode: 'custom',
                    showSkipCropButton: false
                }, (error, result) => {
                    console.log(error, result)
                    if (!error && result && result.event === "success") {
                        console.log('Done! Here is the image info: ', result.info);
                        const plantTitle = document.querySelector('#new-plant-title').value
                        const plantCaption = document.querySelector('#new-plant-caption').value
                        const newPlant = {
                            title: plantTitle,
                            caption: plantCaption,
                            file_name: result.info.url,
                        }
                        document.querySelector('#new-plant-title').value = ""
                        document.querySelector('#new-plant-caption').value = ""
                        console.log(newPlant)
                        fetch("/api/plant/", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                        body: JSON.stringify(newPlant)
                        })
                    }
                }
                )

                document.getElementById("upload_widget").addEventListener("click", function () {
                    myWidget.open();
                }, false);
            </script>
            </input>
        </button>
            <a href="/profile" id="create-plant" class="btn btn-primary">Check out your new post!</a>
    </div>
</div>